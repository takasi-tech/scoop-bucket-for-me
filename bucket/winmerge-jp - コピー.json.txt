{
    "architecture": {
        "64bit": {
            "url": "https://download.sourceforge.net/winmerge-v2-jp/winmerge-2.16.6-jp-2-x64-exe.zip",
            "hash": "fff"
        }
    },
    "version": "2.16.6-jp-2",
    "extract_dir": "WinMerge",
    "bin": "WinMergeU.exe",
    "persist": [
        "Filters",
        "MergePlugins"
    ],
    "pre_install": [
        "$ScoopPreservedDirPath = \"$env:TEMP\\__scoop__preserved\"",
        "if (Test-Path $ScoopPreservedDirPath -PathType Container) {",
        "  Write-Output \"[pre_install] Removing temporary preserved folder\"",
        "  Remove-Item $ScoopPreservedDirPath -Recurse -Force",
        "}",
        "Write-Output \"[pre_install] Creating temporary preserved folder\"",
        "New-Item $ScoopPreservedDirPath -ItemType Directory | Out-Null",
        "Write-Output \"[pre_install] Preserving original files\"",
        "Copy-Item \"$dir\\*\" $ScoopPreservedDirPath -Recurse -Force"
    ],
    "installer": {
        "script": [
            "cd $dir",
            "Cmd.exe /C Call RegisterPerUser.bat /s",
            "Add-AppxPackage WinMergeContextMenuPackage.msix -ExternalLocation $dir"
        ]
    },
    "pre_uninstall": [
        "cd $dir",
        "Get-AppxPackage -name WinMerge | Remove-AppxPackage",
        "Cmd.exe /C Call RegisterPerUser.bat /u /s"
    ],
    "shortcuts": [
        [
            "WinMergeU.exe",
            "WinMerge日本語版"
        ]
    ],
    "license": "GPL-2.0",
    "homepage": "https://winmergejp.bitbucket.io/",
    "checkver": {
        "re": "WinMerge-(?<v1>[\\d.]+)-jp-(?<v2>[\\d]+)-Setup.exe",
        "replace": "${v1}.${v2}"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://download.sourceforge.net/winmerge-v2-jp/winmerge-$matchV1-jp-$matchV2-x64-exe.zip"
            }
        }
    }
}
